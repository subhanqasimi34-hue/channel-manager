<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Channel Manager Dashboard</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="app-shell" id="appShell">
    <aside class="sidebar">
      <div class="brand">
        <img src="/assets/Channel-manager.png" class="brand-logo" alt="Channel Manager logo" />
        Channel Manager
      </div>
      <nav>
        <button class="nav-item active" data-target="overview">Overview</button>
        <button class="nav-item" data-target="designer">Channel Builder</button>
        <button class="nav-item" data-target="templates">Templates</button>
        <button class="nav-item" data-target="photo">Photo Import</button>
        <button class="nav-item" data-target="text">Text Import</button>
        <button class="nav-item" data-target="clone">Clone Server</button>
        <button class="nav-item admin-only" data-target="admin">Owner Panel</button>
        <button class="nav-item" data-target="logs">Live Logs</button>
      </nav>
      <div class="user-card">
        <div class="avatar" id="userAvatar">CM</div>
        <div>
          <div class="user-name" id="userName">Loading…</div>
          <div class="user-status" id="userStatus">Checking session…</div>
        </div>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="top-actions">
          <button class="pill primary" id="btnInviteTop">Invite Bot</button>
          <button class="pill ghost" id="btnDocs">Docs</button>
          <button class="pill ghost" id="btnLogout">Logout</button>
        </div>
        <div class="breadcrumbs">Dashboard</div>
      </header>

      <section class="panel" id="overview">
        <div class="panel-header">
          <div>
            <h2>Servers</h2>
            <p>Pick a server to manage or build.</p>
          </div>
          <div class="filters">
            <select id="guildFilter">
              <option value="all">All</option>
              <option value="owner">Owned</option>
              <option value="manage">Manageable</option>
            </select>
            <button class="pill ghost" id="refreshGuilds">Refresh</button>
          </div>
        </div>
        <div class="server-grid" id="serverGrid"></div>
      </section>

      <section class="panel hidden" id="designer">
        <div class="panel-header">
          <div>
            <h2>Channel Builder</h2>
            <p>Plan categories/channels then deploy via the bot.</p>
          </div>
          <div class="actions">
            <button class="pill ghost" id="designerUndo">Undo</button>
            <button class="pill ghost" id="designerRedo">Redo</button>
            <button class="pill primary" id="designerDeploy">Deploy</button>
          </div>
        </div>
        <div class="designer">
          <div class="columns" id="designerColumns"></div>
          <div class="inspector">
            <h3>Inspector</h3>
            <div class="inspector-fields">
              <label>Channel Name<input type="text" id="channelName" placeholder="#welcome" /></label>
              <label>Type
                <select id="channelType">
                  <option>Text</option>
                  <option>Voice</option>
                </select>
              </label>
              <label>Description<textarea rows="3" id="channelDesc" placeholder="Auto description"></textarea></label>
              <label>Permissions Preset
                <select id="channelPerm">
                  <option>Default</option>
                  <option>Staff Only</option>
                  <option>Private</option>
                </select>
              </label>
              <button class="pill primary full" id="channelApply">Apply Changes</button>
            </div>
          </div>
        </div>
      </section>

      <section class="panel hidden" id="templates">
        <div class="panel-header">
          <div>
            <h2>Templates</h2>
            <p>Save, load, and export server blueprints.</p>
          </div>
          <div class="actions">
            <button class="pill ghost" id="loadTemplates">Refresh</button>
            <button class="pill primary" id="saveTemplate">Save Current</button>
          </div>
        </div>
        <div class="template-grid" id="templateGrid"></div>
      </section>

      <section class="panel hidden" id="photo">
        <div class="panel-header">
          <div>
            <h2>Photo Import</h2>
            <p>Upload a screenshot; AI rebuilds your server.</p>
          </div>
          <div class="actions">
            <button class="pill primary" id="photoAnalyze">Analyze & Build</button>
          </div>
        </div>
        <div class="split">
          <div class="upload-box">
            <p>Drop screenshot here</p>
            <input type="file" id="photoInput" accept="image/*" />
          </div>
          <div class="preview" id="photoPreview">
            <h3>Detected Structure</h3>
            <ul class="structure-list" id="photoStructure"></ul>
          </div>
        </div>
      </section>

      <section class="panel hidden" id="text">
        <div class="panel-header">
          <div>
            <h2>Text Import</h2>
            <p>Paste categories/channels; bot parses, corrects, and builds.</p>
          </div>
          <div class="actions">
            <button class="pill ghost" id="loadSample">Load Sample</button>
            <button class="pill primary" id="textBuild">Parse & Build</button>
          </div>
        </div>
        <div class="split">
          <textarea id="textInput" class="code" rows="14" placeholder="Welcome&#10;#welcome&#10;#rules"></textarea>
          <div class="preview">
            <h3>Parsed Preview</h3>
            <ul class="structure-list" id="textStructure"></ul>
          </div>
        </div>
      </section>

      <section class="panel hidden" id="clone">
        <div class="panel-header">
          <div>
            <h2>Clone Server</h2>
            <p>Copy roles, channels, and permissions from another server.</p>
          </div>
          <div class="actions">
            <button class="pill primary" id="cloneStart">Clone</button>
          </div>
        </div>
        <div class="split">
          <input type="text" id="cloneGuildId" placeholder="Source guild ID" />
          <div class="preview" id="clonePreview">
            <h3>Status</h3>
            <div class="log-box" id="cloneLog"></div>
          </div>
        </div>
      </section>

      <section class="panel hidden admin-only" id="admin">
        <div class="panel-header">
          <div>
            <h2>Owner Panel</h2>
            <p>Restricted to OWNER_IDS.</p>
          </div>
          <div class="actions">
            <button class="pill ghost" id="adminLogsBtn">Refresh Logs</button>
            <button class="pill primary" id="adminRestartBtn">Restart Bot</button>
          </div>
        </div>
        <div class="log-box tall" id="adminLogs"></div>
      </section>

      <section class="panel hidden" id="logs">
        <div class="panel-header">
          <div>
            <h2>Live Logs</h2>
            <p>Stream of bot actions and events.</p>
          </div>
        </div>
        <div class="log-box tall" id="logStream"></div>
      </section>
    </main>
  </div>

  <script src="/dashboard.js"></script>
  <script src="/scripts/ui.js"></script>
</body>
</html>
